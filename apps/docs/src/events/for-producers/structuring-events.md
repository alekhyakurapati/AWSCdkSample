---
title: How to Structure your Event
---

# How to Structure your Event

Event Schemas are the means the IntegrationHub platform utilises to create a binding contract between the Producer Application and Consumer Application.

Producer Application team will be able to register a Schema with the name of the event, description, information sensitivity and with other Application Information that will provide the Consumer Application with context to understand the structure, as well as who to contact for information regarding the event

Schemas are defined using the [JSONSchema Draft 4](https://json-schema.org/specification-links.html#draft-4) specification.

:::info
The use of Draft 4 is an AWS limitation and it also seems to be that they use a slightly customised version of the specification. Not all the schema keywords seem to be present (e.g. [allOf](https://datatracker.ietf.org/doc/html/draft-fge-json-schema-validation-00#section-5.5.3), [oneOf](https://datatracker.ietf.org/doc/html/draft-fge-json-schema-validation-00#section-5.5.5), [anyOf](https://datatracker.ietf.org/doc/html/draft-fge-json-schema-validation-00#section-5.5.4))
:::

## Woodside's Event Model

All business events at Woodside must include 2 properties:

-   **Metadata**: meta information that must include 3 required sub-fields
    -   **Guid**: Globally Unique ID
    -   **Time**: Timestamp in ISO Format (e.g. `"2023-05-15T18:43:48Z"`)
    -   **Version**: a string number value representing the version (e.g. `"2"`)
-   **Data**: the actual event payload

:::warning
Please make sure to use a string version value when publishing events as subscriptions to specific schema versions use the string value.
And the event rule won't match integer values
:::

The following is an example of the `S4 MaintenanceNotificationCreated Event` with a sample of fields

```json
{
    "Metadata": {
        "Guid": "f5e269c0-56d4-4705-b2a8-e15dde562116",
        "Time": "2023-05-15T18:43:48Z",
        "Version": "2"
    },
    "Data": {
        "MaintenanceNotificationItem": {
            "NotificationText": "Capex replacement",
            "MaintPriority": "4",
            "NotificationType": "N6",
            "NotifProcessingPhase": "3",
            "NotifProcessingPhaseDesc": "In Process",
            "MaintPriorityDesc": "Medium"
        }
    }
}
```

Since we utilize AWS EventBridge service as our Message Broker, the event payload recieved by consumers is an [EventBridge Event object](https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-events-structure.html)

There are 3 main fields that are of particular importance:

-   **source**: the source of the event, in our case, the business domain
-   **detail-type**: the name of the event
-   **detail**: the event payload

```json
{
    "version": "0", // an AWS eventbridge managed version. This is not used at Woodside.
    "id": "6a7e8feb-b491-4cf7-a9f1-bf3703467718", // an ID generated by AWS Eventbridge
    "source": "wel.operations.maintenance",
    "detail-type": "MaintenanceNotificationItem",
    "account": "111122223333",
    "time": "2017-12-22T18:43:48Z",
    "region": "ap-southeast-2",
    "resources": [],
    "detail": {
        "Metadata": {
            "Guid": "f5e269c0-56d4-4705-b2a8-e15dde562116",
            "Time": "2023-05-15T18:43:48Z",
            "Version": "2"
        },
        "Data": {
            "MaintenanceNotificationItem": {
                "NotificationText": "Capex replacement",
                "MaintPriority": "4",
                "NotificationType": "N6",
                "NotifProcessingPhase": "3",
                "NotifProcessingPhaseDesc": "In Process",
                "MaintPriorityDesc": "Medium"
            }
        }
    }
}
```
